!function(t,i,n){"use strict";var s,e,o,u=function(t,i){s=cloudkid.Application,e=cloudkid.SwishSprite,o=cloudkid.MediaLoader,this._onUpdate=this._onUpdate.bind(this),this._onComplete=this._onComplete.bind(this),this._updateSilence=this._updateSilence.bind(this),this.initialize(t,i)},a=u.prototype,l=null,r=!1,c=null,p=null,d=null,h=null,_=!1,f=0,y=!1,A=0,m=0,C=null,k=null,b=null;a.soundLoaded=!1,u.VERSION="2.2.2",u.init=function(t,i){return k||new u(t,i),k},Object.defineProperty(u,"instance",{get:function(){return k}}),a.initialize=function(t,i){k||(r=!1,k=this,"object"==typeof t?g(t,i):"string"==typeof t?o.instance.load(t,function(t){return t&&t.content?void g(t.content,i):void i(!1)}):i(!1))};var g=function(t,i){l=t;var s=!0;l&&l.resources===n&&(s=!1),l&&l.spritemap===n&&(s=!1),i&&i(s)},v=function(t){if(!C)return!1;if(t!==n){if(!l||!l.spritemap)return!1;if(l.spritemap[t]===n)return!1}return!0};a.getAudioSprite=function(){return C},a.load=function(t){if(l){var i,u,a=o.instance.cacheManager,r=l.resources.length;for(i=0;r>i;i++)u=l.resources[i],l.resources[i]=a.prepare(u.url!==n?u.url:u,!0);C||(C=new e(l),C.manualUpdate=!0);var c=this;C.off(e.LOADED),C.on(e.LOADED,function(){C.off(e.LOADED).on(e.PROGRESS,c._onUpdate).on(e.COMPLETE,c._onComplete),c.soundLoaded=!0,t()}),s.instance.on("update",C.update),C.load()}},a.prepare=function(t){v(t)&&C.prepare(t)},a.isPlaying=function(){return!_},a.pause=function(){!_&&C&&c&&(y?this._stopSilence():C.pause(),_=!0)},a.resume=function(){_&&C&&c&&(y?this._startSilence():C.resume(),_=!1)},a.play=function(t,i,s,e){if(!v(t))return null;var o=c;o&&o.priority===n&&(o.priority=0);var u=l.spritemap[t];return u.priority===n&&(u.priority=0),o&&u.priority<o.priority?(i&&i(),null):(_||this.stop(),p=t,c=u,d=i||null,h=e||null,_=!1,f=0,m=0,y?this._playSilence():this._playAudio(),b=new S,b._end=1e3*c.end,b._start=1e3*c.start,b.length=b._end-b._start,"function"==typeof s&&setTimeout(s,0),b)},a._playSilence=function(){A=this.getLength(p),m=C.getPosition(),h&&h(f),this._startSilence()},a._startSilence=function(){s.instance.on("update",this._updateSilence)},a._stopSilence=function(){s.instance.off("update",this._updateSilence)},a._updateSilence=function(t){m+=t/1e3,f=m/A,A>m?h&&h(Math.min(1,Math.max(0,f))):this._onComplete()},a._playAudio=function(){h&&h(f);var t;m>0&&(t=C.getSound(p).start+m),C.play(p,t)},a._onUpdate=function(t){f=t,h&&h(f)},a._onComplete=function(){c&&(c.loop?(f=0,m=0,d&&d()):this.stop(!0))},a.stop=function(t){f=0,m=0,h=null,p=null,c=null,_=!0,A=0,b&&(b.isValid=!1,b=null),this._stopSilence();var i=d;d=null,C&&C.stop(),t===n&&(t=!1),t&&null!==i&&i()},a.getLength=function(t){return l&&l.spritemap[t]!==n?l.spritemap[t].end-l.spritemap[t].start:0},a.mute=function(){y||(y=!0,C&&c&&(C.pause(),_||this._playSilence()))},a.unmute=function(){y&&(y=!1,C&&c&&(this._stopSilence(),_||this._playAudio()))},a.getMuted=function(){return y},a.isLooping=function(t){return v(t)?l.spritemap[t].loop:void 0},a.hasAlias=function(t){return l?!!l.spritemap[t]:!1},a.getAliases=function(t){var i,n=[];if(t)for(i in l.spritemap)n.push(i);else for(i in l.spritemap)"silence"!=i&&n.push(i);return n},a.destroy=function(){r||(this.stop(),C&&(s.instance.off("update",C.update),C.destroy()),k=C=l=c=p=h=d=null,r=!0)};var S=function(){this.isValid=!0,this._start=0,this._end=0,this.length=0};Object.defineProperty(S.prototype,"position",{get:function(){return this.isValid&&C?y?1e3*m:1e3*C.getPosition():0}}),S.prototype.stop=function(){this.isValid&&k.stop()},S.prototype.pause=function(){this.isValid&&k.pause()},S.prototype.unpause=function(){this.isValid&&k.resume()},namespace("cloudkid").Audio=u}(window,document),function(){"use strict";var t,i,n,s=function(s){t=cloudkid.Captions,i=cloudkid.Audio,n=cloudkid.Application,this._audioListener=this._onAudioFinished.bind(this),this._update=this._update.bind(this),this._updateCaptionPos=this._updateCaptionPos.bind(this),s&&(this.captions=s instanceof t?s:new t,this.captions.isSlave=!0),this._listHelper=[]},e=s.prototype={};e.audioList=null,e._listCounter=0,e._currentAudio=null,e._audioInst=null,e._callback=null,e._cancelledCallback=null,e._audioListener=null,e._timer=0,e.captions=null,e._listHelper=null,Object.defineProperty(e,"playing",{get:function(){return null!==this._currentAudio||this._timer>0}}),e.play=function(t,i,n){this.stop(),this._listCounter=-1,this._listHelper[0]=t,this.audioList=this._listHelper,this._callback=i,this._cancelledCallback=n,this._onAudioFinished()},e.playList=function(t,i,n){this.stop(),this._listCounter=-1,this.audioList=t,this._callback=i,this._cancelledCallback=n,this._onAudioFinished()},e._onAudioFinished=function(){if(n.instance.off("update",this._update),n.instance.off("update",this._updateCaptionPos),this.captions&&this._audioInst&&this.captions.seek(this._audioInst.length),this._audioInst=null,this._listCounter++,this._listCounter>=this.audioList.length){this.captions&&this.captions.stop(),this._currentAudio=null,this._cancelledCallback=null;var t=this._callback;this._callback=null,t&&t()}else this._currentAudio=this.audioList[this._listCounter],"string"==typeof this._currentAudio?this._playAudio():"function"==typeof this._currentAudio?(this._currentAudio(),this._onAudioFinished()):(this._timer=this._currentAudio,this._currentAudio=null,n.instance.on("update",this._update))},e._update=function(t){this.captions&&this.captions.updateTime(t),this._timer-=t,this._timer<=0&&this._onAudioFinished()},e._updateCaptionPos=function(){return this._audioInst?this._audioInst.isValid?void this.captions.seek(this._audioInst.position):void this.stop():void 0},e._playAudio=function(){var t=i.instance;!t.hasAlias(this._currentAudio)&&this.captions&&this.captions.hasCaption(this._currentAudio)?(this.captions.play(this._currentAudio),this._timer=this.captions.currentDuration,this._currentAudio=null,n.instance.on("update",this._update)):(this._audioInst=t.play(this._currentAudio,this._audioListener),this.captions&&(this.captions.play(this._currentAudio),n.instance.on("update",this._updateCaptionPos)))},e.stop=function(){this._currentAudio&&this._audioInst.isValid&&(i.instance.stop(),this._currentAudio=null),this.captions&&this.captions.stop(),n.instance.off("update",this._update),n.instance.off("update",this._updateCaptionPos),this.audioList=null,this._timer=0,this._callback=null;var t=this._cancelledCallback;this._cancelledCallback=null,t&&t()},e.destroy=function(){this.stop(),this.audioList=null,this._listHelper=null,this._currentAudio=null,this._audioInst=null,this._callback=null,this._cancelledCallback=null,this._audioListener=null,this.captions&&(this.captions.destroy(),this.captions=null)},namespace("cloudkid").VOPlayer=s,namespace("cloudkid").Audio.VOPlayer=s}();