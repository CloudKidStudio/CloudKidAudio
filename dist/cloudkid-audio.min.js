!function(t,i,n){"use strict";var e=cloudkid.OS,s=cloudkid.SwishSprite,o=cloudkid.MediaLoader,a=function(t,i){this._onUpdate=this._onUpdate.bind(this),this._onComplete=this._onComplete.bind(this),this.initialize(t,i)},u=a.prototype,l=null,r=!1,c=null,p=null,d=null,h=null,_=!1,f=0,y=!1,m=0,A=0,C="AudioMute",b="SwishSprite",k=null,g=null,v=null;u.soundLoaded=!1,a.VERSION="2.2.0",a.init=function(t,i){return g||new a(t,i),g},Object.defineProperty(a,"instance",{get:function(){return g}}),u.initialize=function(t,i){g||(r=!1,g=this,"object"==typeof t?S(t,i):"string"==typeof t?o.instance.load(t,function(t){return t&&t.content?void S(t.content,i):void i(!1)}):i(!1))};var S=function(t,i){l=t;var e=!0;l&&l.resources===n&&(e=!1),l&&l.spritemap===n&&(e=!1),i&&i(e)},L=function(t){if(!k)return!1;if(t!==n){if(!l||!l.spritemap)return!1;if(l.spritemap[t]===n)return!1}return!0};u.getAudioSprite=function(){return k},u.load=function(t){if(l){var i,a,u=o.instance.cacheManager,r=l.resources.length;for(i=0;r>i;i++)a=l.resources[i],l.resources[i]=u.prepare(a.url!==n?a.url:a,!0);k||(k=new s(l),k.manualUpdate=!0);var c=this;k.off(s.LOADED),k.on(s.LOADED,function(){k.off(s.LOADED).on(s.PROGRESS,c._onUpdate).on(s.COMPLETE,c._onComplete),c.soundLoaded=!0,t()}),e.instance.addUpdateCallback(b,k.update),k.load()}},u.prepare=function(t){L(t)&&k.prepare(t)},u.isPlaying=function(){return!_},u.pause=function(){!_&&k&&c&&(y?this._stopSilence():k.pause(),_=!0)},u.resume=function(){_&&k&&c&&(y?this._startSilence():k.resume(),_=!1)},u.play=function(t,i,e,s){if(!L(t))return null;var o=c;o&&o.priority===n&&(o.priority=0);var a=l.spritemap[t];return a.priority===n&&(a.priority=0),o&&a.priority<o.priority?null:(_||this.stop(),p=t,c=a,d=i||null,h=s||null,_=!1,f=0,A=0,y?this._playSilence():this._playAudio(),v=new P,v._end=1e3*c.end,v._start=1e3*c.start,v.length=v._end-v._start,"function"==typeof e&&setTimeout(e,0),v)},u._playSilence=function(){m=this.getLength(p),A=k.getPosition(),h&&h(f),this._startSilence()},u._startSilence=function(){e.instance.addUpdateCallback(C,this._updateSilence.bind(this))},u._stopSilence=function(){e.instance.removeUpdateCallback(C)},u._updateSilence=function(t){A+=t/1e3,f=A/m,m>A?h&&h(Math.min(1,Math.max(0,f))):this._onComplete()},u._playAudio=function(){h&&h(f);var t;A>0&&(t=k.getSound(p).start+A),k.play(p,t)},u._onUpdate=function(t){f=t,h&&h(f)},u._onComplete=function(){c&&(c.loop?(f=0,A=0,d&&d()):this.stop(!0))},u.stop=function(t){f=0,A=0,h=null,p=null,c=null,_=!0,m=0,v&&(v.isValid=!1,v=null),this._stopSilence();var i=d;d=null,k&&k.stop(),t===n&&(t=!1),t&&null!==i&&i()},u.getLength=function(t){return l&&l.spritemap[t]!==n?l.spritemap[t].end-l.spritemap[t].start:0},u.mute=function(){y||(y=!0,k&&c&&(k.pause(),_||this._playSilence()))},u.unmute=function(){y&&(y=!1,k&&c&&(this._stopSilence(),_||this._playAudio()))},u.getMuted=function(){return y},u.isLooping=function(t){return L(t)?l.spritemap[t].loop:void 0},u.hasAlias=function(t){return l?!!l.spritemap[t]:!1},u.getAliases=function(t){var i,n=[];if(t)for(i in l.spritemap)n.push(i);else for(i in l.spritemap)"silence"!=i&&n.push(i);return n},u.destroy=function(){r||(this.stop(),k&&(e.instance.removeUpdateCallback(b),k.destroy()),g=k=l=c=p=h=d=null,r=!0)};var P=function(){this.isValid=!0,this._start=0,this._end=0,this.length=0};Object.defineProperty(P.prototype,"position",{get:function(){return this.isValid&&k?y?1e3*A:1e3*k.getPosition():0}}),P.prototype.stop=function(){this.isValid&&g.stop()},P.prototype.pause=function(){this.isValid&&g.pause()},P.prototype.unpause=function(){this.isValid&&g.resume()},namespace("cloudkid").Audio=a}(window,document),function(){"use strict";var t,i,n,e=function(e){t=cloudkid.Captions,i=cloudkid.Audio,n=cloudkid.OS,this._audioListener=this._onAudioFinished.bind(this),this._update=this._update.bind(this),this._updateCaptionPos=this._updateCaptionPos.bind(this),e&&(this.captions=e instanceof t?e:new t,this.captions.isSlave=!0),this._listHelper=[]},s=e.prototype={},o="VOPlayer";s.audioList=null,s._listCounter=0,s._currentAudio=null,s._audioInst=null,s._callback=null,s._cancelledCallback=null,s._audioListener=null,s._timer=0,s.captions=null,s._listHelper=null,Object.defineProperty(s,"playing",{get:function(){return null!==this._currentAudio||this._timer>0}}),s.play=function(t,i,n){this.stop(),this._listCounter=-1,this._listHelper[0]=t,this.audioList=this._listHelper,this._callback=i,this._cancelledCallback=n,this._onAudioFinished()},s.playList=function(t,i,n){this.stop(),this._listCounter=-1,this.audioList=t,this._callback=i,this._cancelledCallback=n,this._onAudioFinished()},s._onAudioFinished=function(){if(n.instance.removeUpdateCallback(o),this.captions&&this._audioInst&&this.captions.seek(this._audioInst.length),this._audioInst=null,this._listCounter++,this._listCounter>=this.audioList.length){this.captions&&this.captions.stop(),this._currentAudio=null,this._cancelledCallback=null;var t=this._callback;this._callback=null,t&&t()}else this._currentAudio=this.audioList[this._listCounter],"string"==typeof this._currentAudio?this._playAudio():"function"==typeof this._currentAudio?(this._currentAudio(),this._onAudioFinished()):(this._timer=this._currentAudio,this._currentAudio=null,n.instance.addUpdateCallback(o,this._update))},s._update=function(t){this.captions&&this.captions.updateTime(t),this._timer-=t,this._timer<=0&&this._onAudioFinished()},s._updateCaptionPos=function(){this._audioInst&&this.captions.seek(this._audioInst.position)},s._playAudio=function(){var t=i.instance;!t.hasAlias(this._currentAudio)&&this.captions&&this.captions.hasCaption(this._currentAudio)?(this.captions.play(this._currentAudio),this._timer=this.captions.currentDuration,this._currentAudio=null,n.instance.addUpdateCallback(o,this._update)):(this._audioInst=t.play(this._currentAudio,this._audioListener),this.captions&&(this.captions.play(this._currentAudio),n.instance.addUpdateCallback(o,this._updateCaptionPos)))},s.stop=function(){this._currentAudio&&(i.instance.stop(),this._currentAudio=null),this.captions&&this.captions.stop(),n.instance.removeUpdateCallback(o),this.audioList=null,this._timer=0,this._callback=null;var t=this._cancelledCallback;this._cancelledCallback=null,t&&t()},s.destroy=function(){this.stop(),this.audioList=null,this._listHelper=null,this._currentAudio=null,this._audioInst=null,this._callback=null,this._cancelledCallback=null,this._audioListener=null,this.captions&&(this.captions.destroy(),this.captions=null)},namespace("cloudkid").VOPlayer=e}();